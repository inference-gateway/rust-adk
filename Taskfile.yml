version: "3"

tasks:
  default:
    desc: Show available tasks
    cmds:
      - task --list

  a2a:download-schema:
    desc: Download the latest A2A schema and convert to YAML
    cmds:
      - curl -o schema.yaml https://raw.githubusercontent.com/inference-gateway/schemas/refs/heads/main/a2a/a2a-schema.yaml

  a2a:generate-types:
    desc: Generate the Golang ADK types from the A2A schema
    cmds:
      # TODO - implement language specific codegeneration or use existing generator tool - research
      - go run github.com/inference-gateway/tools/cmd/generator@v0.1.1 -generator jsonrpc -package types schema.yaml types/generated_types.rs

  lint:
    desc: Run linter
    cmds:
      - cargo fmt --all -- --check

  analyse:
    desc: Run static analysis
    cmds:
      - cargo clippy --all-targets --all-features -- -D warnings

  test:
    desc: Run tests
    cmds:
      - cargo test --all-targets --all-features
